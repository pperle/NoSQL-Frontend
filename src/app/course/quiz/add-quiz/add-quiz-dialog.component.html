<h1 matDialogTitle>Erstellen Sie einen neuen Test</h1>

<mat-dialog-content>
  <mat-card>
    <mat-card-title>
      <mat-form-field class="full-width">
        <input matInput placeholder="Name des Tests" [(ngModel)]="quiz.name" (change)="onUpdateQuizTitle($event)">
      </mat-form-field>
    </mat-card-title>

    <mat-card-content>

      <mat-form-field style="width: 49.5%">
        <input matInput [matDatepickerFilter]="notBeforeToday" [matDatepicker]="startDate" placeholder="sichtbar von"
               [(ngModel)]="quiz.visibilityStartDate" (dateChange)="onUpdateVisibilityStartDate($event)" readonly>
        <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
        <mat-datepicker #startDate></mat-datepicker>
      </mat-form-field>
      <mat-form-field style="width: 49.5%">
        <input matInput [matDatepickerFilter]="notBeforeStartDate" [matDatepicker]="endDate" placeholder="sichtbar bis"
               [(ngModel)]="quiz.visibilityEndDate" (dateChange)="onUpdateVisibilityEndDate($event)" readonly>
        <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
        <mat-datepicker #endDate></mat-datepicker>
      </mat-form-field>
    </mat-card-content>


    <mat-card *ngFor="let question of quiz.questions; index as questionIndex">
      <mat-card-title>
        <mat-form-field class="full-width">
          <input matInput placeholder="Frage" [(ngModel)]="question.questionText"
                 (change)="onUpdateQuestion($event, questionIndex)">
        </mat-form-field>
      </mat-card-title>
      <mat-card-content>
        <div *ngFor="let answer of question.possibleAnwsers; index as answerIndex">
          <mat-checkbox (change)="onUpdateChecked($event, questionIndex, answerIndex)">
            <mat-form-field>
              <input class="answerText" matInput placeholder="Antwort" [ngModel]="answer"
                     (change)="onUpdateAnswer($event, questionIndex, answerIndex)">
            </mat-form-field>
          </mat-checkbox>
        </div>
      </mat-card-content>
    </mat-card>

    <span class="done" (click)="addQuestion()">
    <button mat-fab>
      <mat-icon>add circle</mat-icon>
    </button>
  </span>

  </mat-card>


</mat-dialog-content>

<mat-dialog-actions>
  <button mat-button mat-dialog-close (click)="onSave()">Test speichern</button>
  <!-- Can optionally provide a result for the closing dialog. -->
  <button mat-button [mat-dialog-close]="true">Abbrechen</button>
</mat-dialog-actions>

